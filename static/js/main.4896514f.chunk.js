(this.webpackJsonpsoli2=this.webpackJsonpsoli2||[]).push([[0],{13:function(e,t,n){e.exports=n(22)},18:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(11),o=n.n(l),i=(n(18),n(3)),c=n(9),u=n(1),s=n(5),m=n(7),d=n(6),h=n(8),f=n(4),g=n(2),b=n(12);n(21);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=3,E=3,k=10,y=8,S=4,O=Object(g.a)(Array(26).keys()).map((function(e){return(e+10).toString(36).toUpperCase()})),w=Object(g.a)(Array(26).keys()).map((function(e){return(35-e).toString(36).toUpperCase()})),j=function(e){return O.slice(0,e)},M=function(e){return w.slice(0,e)},D=function(e){return Object(g.a)(Array(e).keys()).slice(1)},P=function(e,t,n,a){return[e.map((function(e){return Array(t).fill(0).map((function(t){return new N(e)}))})),n.map((function(e){return a.map((function(t){return new N(e,t)}))})),new N("@")].flat(2)},A=function(e){return e.reduce((function(e,t){return e.splice(Math.floor(Math.random()*e.length),0,t)&&e}),[])},L=function(e,t){return Object(g.a)(Array(t).keys()).map((function(n){return e.filter((function(e,a){return(a+n)%t===0}))}))},R=0,F=function(){return++R},N=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(f.a)(this,e),this.suit=t,this.value=n,this.free=a,this.id=F()},W=function(e,t){return e.suit!==t.suit&&0!==e.value&&e.value===t.value-1},B=function(e){return e.card?r.a.createElement("button",{disabled:!e.canMove,onClick:e.onClick},e.card.suit,e.card.value||""):r.a.createElement("button",{onClick:e.onClick},"Empty")},x=function(e){return r.a.createElement("ul",null,e.cards.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(B,{card:e,canMove:!1}))})))},G=function(e){var t=e.children;return r.a.createElement("table",null,r.a.createElement("tbody",null,t))},U=function(e){function t(){return Object(f.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"canMove",value:function(e){return e===this.props.cards.length-1||W(this.props.cards[e+1],this.props.cards[e])&&this.canMove(e+1)}},{key:"render",value:function(){var e=this,t=this.props.cards;return r.a.createElement("ul",null,t.length&&t.map((function(t,n){return r.a.createElement("li",{key:t.id},r.a.createElement(B,{card:t,canMove:e.canMove(n),onClick:e.props.onCardClick(n)}))}))||r.a.createElement("li",{key:"0"},r.a.createElement(B,{card:null,onClick:this.props.onCardClick(0)})))}}]),t}(r.a.Component),H=function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={columns:y,suits:C,dragons:E,numbers:k,cardsPerDragon:S},e.handleReset=e.handleReset.bind(Object(u.a)(e)),e.handleChange=e.handleChange.bind(Object(u.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(u.a)(e)),e}return Object(h.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(e){var t=this.state,n=t.dragons,a=t.suits,r=t.numbers,l=t.columns,o=t.cardsPerDragon;this.props.handleSubmit(a,n,l,r,o),e.preventDefault()}},{key:"handleChange",value:function(e){this.setState(Object(c.a)({},e.target.name,e.target.value))}},{key:"handleReset",value:function(){this.setState({columns:y,suits:C,dragons:E,numbers:k})}},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("table",null,r.a.createElement("tbody",{style:{textAlign:"right"}},r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("label",null,"Suits: "),r.a.createElement("input",{type:"number",name:"suits",min:"0",value:this.state.suits,onChange:this.handleChange})),r.a.createElement("td",null,r.a.createElement("label",null,"Dragons: "),r.a.createElement("input",{type:"number",name:"dragons",min:"0",value:this.state.dragons,onChange:this.handleChange})),r.a.createElement("td",null,r.a.createElement("label",null,"Columns: "),r.a.createElement("input",{type:"number",name:"columns",min:"0",value:this.state.columns,onChange:this.handleChange}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("label",null,"Cards/suit: "),r.a.createElement("input",{type:"number",name:"numbers",min:"0",value:this.state.numbers,onChange:this.handleChange})),r.a.createElement("td",null,r.a.createElement("label",null,"Cards/dragon: "),r.a.createElement("input",{type:"number",name:"cardsPerDragon",min:"0",value:this.state.cardsPerDragon,onChange:this.handleChange})),r.a.createElement("td",null,r.a.createElement("input",{type:"submit",value:"Save & restart"}),r.a.createElement("button",{type:"button",onClick:this.handleReset},"Defaults"))))))}}]),t}(r.a.Component),J=function(e){function t(e){var n;Object(f.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).getStartingState=function(e,t,n,a,r){var l=j(e),o=M(t),i=D(a),c=P(o,r,l,i);return{state:{columns:L(A(c),n),freeCells:Array(t).fill(null),home:l.map((function(e){return new N(e,0)})),flower:null,inMotion:null},dragons:o,suits:l}},n.getLastState=function(){return n.state.history.slice(-1)[0]},n.updateState=function(e){var t=n.state.history,a=t.slice(-1)[0];Object(b.isEqual)(e,a)||n.setState({history:[].concat(Object(g.a)(t),[e])})},n.rollBackMoves=function(e){return function(){var t=n.state.history.slice(0,-e);t.length<1||n.setState({history:t})}},n.goBackMoves=function(e){return function(){var t=n.state.history.slice(-e-1)[0];n.updateState(t)}},n.handleColumnClick=function(e){return function(t){return function(){var a=n.getLastState(),r=a.columns,l=a.inMotion,o=Object(i.a)(a,["columns","inMotion"]),c=r[e],u=l&&l[0]||null,s=c[t],m=function(){return c.length-1===t&&W(u,s)||0===c.length},d=l?m()?c.concat(l):c:c.filter((function(e,n){return n<t}))||[void 0],h=l?m()?null:l:c.slice(t,c.length),f=r.map((function(t,n){return e===n?d:t}));n.updateState(v({inMotion:h,columns:f},o))}}},n.handleFreeCellClick=function(e){return function(){var t=n.getLastState(),a=t.freeCells,r=t.inMotion,l=Object(i.a)(t,["freeCells","inMotion"]),o=a[e],c=!o&&r&&1===r.length&&r[0]||r&&o||null,u=o&&r||r&&r.length>1&&r||o&&[o]||null,s=a.map((function(t,n){return n===e?c:t}));n.updateState(v({freeCells:s,inMotion:u},l))}},n.handleHomeCellClick=function(e){return function(){var t=n.getLastState(),a=t.home,r=t.inMotion,l=Object(i.a)(t,["home","inMotion"]);if(r&&1===r.length){var o=a[e],c=r[0],u=c&&c.suit===o.suit&&c.value===o.value+1,s=u&&c||o,m=!u&&r||null,d=a.map((function(t,n){return n===e?s:t}));n.updateState(v({home:d,inMotion:m},l))}}},n.handleFlowerClick=function(){var e=n.getLastState(),t=e.inMotion,a=(e.flower,Object(i.a)(e,["inMotion","flower"]));if(t&&"@"===t[0].suit){var r=t[0];n.updateState(v({flower:r,inMotion:null},a))}},n.allDragonsFree=function(e){var t=n.getLastState(),a=t.freeCells,r=t.columns,l=t.inMotion,o=n.state.cardsPerDragon,i=a.concat(r.map((function(e){return e.slice(-1)[0]}))).filter((function(t){return t&&t.suit===e}));return!l&&i.length===o&&a.some((function(t){return null===t||t.suit===e}))},n.handleDragonsClick=function(e){return function(){var t=n.getLastState(),a=t.freeCells,r=t.columns,l=Object(i.a)(t,["freeCells","columns"]),o=a.map((function(t){return t&&t.suit===e?null:t})),c=r.map((function(t){return t.length&&t[t.length-1].suit===e?t.slice(0,-1):t})),u=o.indexOf(null),s=o.map((function(t,n){return n===u?new N("".concat(e,"*"),0,!1):t}));n.updateState(v({freeCells:s,columns:c},l))}},n.isWinningState=function(){var e=n.getLastState(),t=e.columns;return!e.inMotion&&t.every((function(e){return 0===e.length}))},n.autoComplete=function(){var e=n.getLastState(),t=e.inMotion,a=e.columns,r=e.freeCells,l=e.home;if(!t){var o=function(e){return l.map((function(e){return e.suit})).indexOf(e.suit)},i=function(e,t){return l[e].value+1===t.value};a.forEach((function(e,t){if(e.length){var a=e.slice(-1)[0];if("@"!==a.suit){var r=o(a);r<0||i(r,a)&&[n.handleColumnClick(t)(e.length-1),n.handleHomeCellClick(r)].reduce((function(e,t){return e.then(t)}),Promise.resolve())}else[n.handleColumnClick(t)(e.length-1),n.handleFlowerClick].reduce((function(e,t){return e.then(t)}),Promise.resolve())}})),r.forEach((function(e,t){if(e)if("@"!==e.suit){var a=o(e);a<0||i(a,e)&&[n.handleFreeCellClick(t),n.handleHomeCellClick(a)].reduce((function(e,t){return e.then(t)}),Promise.resolve())}else[n.handleFreeCellClick(t),n.handleFlowerClick].reduce((function(e,t){return e.then(t)}),Promise.resolve())}))}},n.newGame=function(){var e=n.state.settings,t=e.nSuits,a=e.nDragons,r=e.nColumns,l=e.nNumbers,o=e.cardsPerDragon,i=n.getStartingState(t,a,r,l,o),c=i.state,u=i.dragons,s=i.suits;n.setState({history:[c],dragons:u,suits:s,cardsPerDragon:o})},n.resetGame=function(){var e=n.state.history[0];n.updateState(e)},n.updateSettingsAndRestart=function(e,t,a,r,l){var o={nSuits:Number(e),nDragons:Number(t),nColumns:Number(a),nNumbers:Number(r),cardsPerDragon:Number(l)};n.setState({settings:o},n.newGame)},n.toggleConfig=function(){var e=n.state.config;n.setState({config:!e})};var a=n.getStartingState(C,E,y,k,S),r=a.state,l=a.dragons,o=a.suits;return n.state={history:[r],dragons:l,suits:o,cardsPerDragon:S,settings:{nSuits:C,nDragons:E,nColumns:y,nNumbers:k,cardsPerDragon:S}},n.updateSettingsAndRestart=n.updateSettingsAndRestart.bind(Object(u.a)(n)),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.getLastState(),n=t.columns,a=t.freeCells,l=t.flower,o=t.home,i=t.inMotion,c=this.state.dragons,u=this.isWinningState();return r.a.createElement("div",null,this.state.config&&r.a.createElement(H,{handleSubmit:this.updateSettingsAndRestart}),r.a.createElement(G,null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(G,null,r.a.createElement("tr",null,a.map((function(t,n){return r.a.createElement("td",null,r.a.createElement(B,{card:t,canMove:null===t||t.free,onClick:e.handleFreeCellClick(n)}))}))),r.a.createElement("tr",null,c.map((function(t){return r.a.createElement("td",null,r.a.createElement("button",{disabled:!e.allDragonsFree(t),onClick:e.handleDragonsClick(t)},"^ ",t,"s"))}))))),r.a.createElement("td",null,r.a.createElement(G,null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(B,{card:l,canMove:!0,onClick:this.handleFlowerClick}))),r.a.createElement("tr",null,r.a.createElement("td",null,"^ @")))),r.a.createElement("td",null,r.a.createElement(G,null,r.a.createElement("tr",null,o.map((function(t,n){return t&&r.a.createElement("td",null,r.a.createElement(B,{card:t,canMove:!0,onClick:e.handleHomeCellClick(n)}))}))))),r.a.createElement("td",null,r.a.createElement("button",{onClick:this.resetGame},"reset game"),r.a.createElement("button",{onClick:this.newGame},"new game"),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.goBackMoves(1)},'"undo"'),r.a.createElement("button",{onClick:this.rollBackMoves(1)},"undo"),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.autoComplete},"auto move"),r.a.createElement("button",{onClick:this.toggleConfig},"settings"))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3},r.a.createElement(G,null,r.a.createElement("tr",null,n.map((function(t,n){return r.a.createElement("td",null,r.a.createElement(U,{cards:t,onCardClick:e.handleColumnClick(n)}))}))))))),r.a.createElement("div",{style:{height:"2em"}}),i&&r.a.createElement(x,{cards:i}),u&&r.a.createElement("h1",null,"You win!"))}}]),t}(r.a.Component),T=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function q(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(J,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/solitaire",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/solitaire","/service-worker.js");T?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):q(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):q(t,e)}))}}()}},[[13,1,2]]]);
//# sourceMappingURL=main.4896514f.chunk.js.map