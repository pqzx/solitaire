(this.webpackJsonpsoli2=this.webpackJsonpsoli2||[]).push([[0],{12:function(e,t,n){e.exports=n(21)},17:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var r=n(0),l=n.n(r),a=n(9),o=n.n(a),i=(n(17),n(10)),c=n(1),u=n(4),s=n(6),f=n(5),h=n(7),m=n(2),d=n(3),v=n(11);n(20);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=["A","B","C"],k=["X","Y","Z"],E=Object(d.a)(Array(10).keys()).slice(1),b=function(){var e=function(e){return e.reduce((function(e,t){return e.splice(Math.floor(Math.random()*e.length),0,t)&&e}),[])}([k.map((function(e){return Array(4).fill(0).map((function(t){return new O(e)}))})),g.map((function(e){return E.map((function(t){return new O(e,t)}))})),new O("@")].flat(2));return Object(d.a)(Array(8).keys()).map((function(t){return e.filter((function(e,n){return(n+t)%8===0}))}))},w=0,y=function(){return++w},O=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(m.a)(this,e),this.suit=t,this.value=n,this.free=r,this.id=y()},j=function(e,t){return e.suit!==t.suit&&0!==e.value&&e.value===t.value-1},M=function(e){return e.card?l.a.createElement("button",{disabled:!e.canMove,onClick:e.onClick},e.card.suit,e.card.value||""):l.a.createElement("button",{onClick:e.onClick},"Empty")},S=function(e){return l.a.createElement("ul",null,e.cards.map((function(e){return l.a.createElement("li",{key:e.id},l.a.createElement(M,{card:e,canMove:!1}))})))},P=function(e){var t=e.children;return l.a.createElement("table",null,l.a.createElement("tbody",null,t))},L=function(e){function t(){return Object(m.a)(this,t),Object(s.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"canMove",value:function(e){return e===this.props.cards.length-1||j(this.props.cards[e+1],this.props.cards[e])&&this.canMove(e+1)}},{key:"render",value:function(){var e=this,t=this.props.cards;return l.a.createElement("ul",null,t.length&&t.map((function(t,n){return l.a.createElement("li",{key:t.id},l.a.createElement(M,{card:t,canMove:e.canMove(n),onClick:e.props.onCardClick(n)}))}))||l.a.createElement("li",{key:"0"},l.a.createElement(M,{card:null,onClick:this.props.onCardClick(0)})))}}]),t}(l.a.Component),A=function(e){function t(e){var n;Object(m.a)(this,t),(n=Object(s.a)(this,Object(f.a)(t).call(this,e))).getLastState=function(){return n.state.history.slice(-1)[0]},n.updateState=function(e){var t=n.state.history,r=t.slice(-1)[0];Object(v.isEqual)(e,r)||n.setState({history:[].concat(Object(d.a)(t),[e])})},n.rollBackMoves=function(e){return function(){var t=n.state.history.slice(0,-e);t.length<1||n.setState({history:t})}},n.goBackMoves=function(e){return function(){var t=n.state.history.slice(-e-1)[0];n.updateState(t)}},n.handleColumnClick=function(e){return function(t){return function(){var r=n.getLastState(),l=r.columns,a=r.inMotion,o=Object(c.a)(r,["columns","inMotion"]),i=l[e],u=a&&a[0]||null,s=i[t],f=function(){return i.length-1===t&&j(u,s)||0===i.length},h=a?f()?i.concat(a):i:i.filter((function(e,n){return n<t}))||[void 0],m=a?f()?null:a:i.slice(t,i.length),d=l.map((function(t,n){return e===n?h:t}));n.updateState(C({inMotion:m,columns:d},o))}}},n.handleFreeCellClick=function(e){return function(){var t=n.getLastState(),r=t.freeCells,l=t.inMotion,a=Object(c.a)(t,["freeCells","inMotion"]),o=r[e],i=!o&&l&&1===l.length&&l[0]||l&&o||null,u=o&&l||l&&l.length>1&&l||o&&[o]||null,s=r.map((function(t,n){return n===e?i:t}));n.updateState(C({freeCells:s,inMotion:u},a))}},n.handleHomeCellClick=function(e){return function(){var t=n.getLastState(),r=t.home,l=t.inMotion,a=Object(c.a)(t,["home","inMotion"]);if(l&&1===l.length){var o=r[e],i=l[0],u=i&&i.suit===o.suit&&i.value===o.value+1,s=u&&i||o,f=!u&&l||null,h=r.map((function(t,n){return n===e?s:t}));n.updateState(C({home:h,inMotion:f},a))}}},n.handleFlowerClick=function(){var e=n.getLastState(),t=e.inMotion,r=(e.flower,Object(c.a)(e,["inMotion","flower"]));if(t&&"@"===t[0].suit){var l=t[0];n.updateState(C({flower:l,inMotion:null},r))}},n.allDragonsFree=function(e){var t=n.getLastState(),r=t.freeCells,l=t.columns,a=t.inMotion,o=r.concat(l.map((function(e){return e.slice(-1)[0]}))).filter((function(t){return t&&t.suit===e}));return!a&&4===o.length&&r.some((function(t){return null===t||t.suit===e}))},n.handleDragonsClick=function(e){return function(){var t=n.getLastState(),r=t.freeCells,l=t.columns,a=Object(c.a)(t,["freeCells","columns"]),o=r.map((function(t){return t&&t.suit===e?null:t})),i=l.map((function(t){return t.length&&t[t.length-1].suit===e?t.slice(0,-1):t})),u=o.indexOf(null),s=o.map((function(t,n){return n===u?new O("".concat(e,"*"),0,!1):t}));n.updateState(C({freeCells:s,columns:i},a))}},n.isWinningState=function(){var e=n.getLastState(),t=e.columns;return!e.inMotion&&t.every((function(e){return 0===e.length}))},n.autoComplete=function(){var e=n.getLastState(),t=e.inMotion,r=e.columns,l=e.freeCells,a=e.home;t||(r.forEach((function(e,t){if(e.length){var r=e.slice(-1)[0];switch(r.suit){case"@":[n.handleColumnClick(t)(e.length-1),n.handleFlowerClick].reduce((function(e,t){return e.then(t)}),Promise.resolve());break;case"A":case"B":case"C":var l=a.map((function(e,t){return e.suit===r.suit?t:null})).filter((function(e){return null!==e}))[0];if(a[l].value+1!==r.value)return;[n.handleColumnClick(t)(e.length-1),n.handleHomeCellClick(l)].reduce((function(e,t){return e.then(t)}),Promise.resolve())}}})),l.forEach((function(e,t){if(e)switch(e.suit){case"@":[n.handleFreeCellClick(t),n.handleFlowerClick].reduce((function(e,t){return e.then(t)}),Promise.resolve());break;case"A":case"B":case"C":var r=a.map((function(t,n){return t.suit===e.suit?n:null})).filter((function(e){return null!==e}))[0];if(a[r].value+1!==e.value)return;[n.handleFreeCellClick(t),n.handleHomeCellClick(r)].reduce((function(e,t){return e.then(t)}),Promise.resolve())}})))};var r={columns:b(),freeCells:[null,null,null],flower:null,home:g.map((function(e){return new O(e,0)})),inMotion:null};return n.state={history:[r]},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.getLastState(),n=t.columns,r=t.freeCells,a=t.flower,o=t.home,i=t.inMotion,c=this.isWinningState();return l.a.createElement("div",null,l.a.createElement(P,null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(P,null,l.a.createElement("tr",null,r.map((function(t,n){return l.a.createElement("td",null,l.a.createElement(M,{card:t,canMove:null===t||t.free,onClick:e.handleFreeCellClick(n)}))}))),l.a.createElement("tr",null,k.map((function(t){return l.a.createElement("td",null,l.a.createElement("button",{disabled:!e.allDragonsFree(t),onClick:e.handleDragonsClick(t)},"^ ",t,"s"))}))))),l.a.createElement("td",null,l.a.createElement(P,null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(M,{card:a,canMove:!0,onClick:this.handleFlowerClick}))),l.a.createElement("tr",null,l.a.createElement("td",null,"^ @")))),l.a.createElement("td",null,l.a.createElement(P,null,l.a.createElement("tr",null,o.map((function(t,n){return t&&l.a.createElement("td",null,l.a.createElement(M,{card:t,canMove:!0,onClick:e.handleHomeCellClick(n)}))}))))),l.a.createElement("td",null,l.a.createElement("button",{onClick:this.goBackMoves(1)},"undo"),l.a.createElement("br",null),l.a.createElement("button",{onClick:this.rollBackMoves(1)},"hard undo"),l.a.createElement("br",null),l.a.createElement("button",{onClick:this.autoComplete},"auto move")))),l.a.createElement(P,null,l.a.createElement("tr",null,n.map((function(t,n){return l.a.createElement("td",null,l.a.createElement(L,{cards:t,onCardClick:e.handleColumnClick(n)}))})))),l.a.createElement("div",{style:{height:"2em"}}),i&&l.a.createElement(S,{cards:i}),c&&l.a.createElement("h1",null,"You win!"))}}]),t}(l.a.Component),F=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function B(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(l.a.createElement(A,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/solitaire",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/solitaire","/service-worker.js");F?(!function(e,t){fetch(e).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):B(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):B(t,e)}))}}()}},[[12,1,2]]]);
//# sourceMappingURL=main.8fd5df5b.chunk.js.map