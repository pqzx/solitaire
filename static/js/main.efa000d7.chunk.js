(this.webpackJsonpsoli2=this.webpackJsonpsoli2||[]).push([[0],{13:function(e,t,n){e.exports=n(22)},18:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(11),o=n.n(l),i=(n(18),n(3)),u=n(9),c=n(1),s=n(5),m=n(7),f=n(6),h=n(8),d=n(4),g=n(2),b=n(12);n(21);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=3,E=3,k=10,O=8,y=4,S=Object(g.a)(Array(26).keys()).map((function(e){return(e+10).toString(36).toUpperCase()})),w=Object(g.a)(Array(26).keys()).map((function(e){return(35-e).toString(36).toUpperCase()})),j=function(e){return S.slice(0,e)},M=function(e){return w.slice(0,e)},D=function(e){return Object(g.a)(Array(e).keys()).slice(1)},P=function(e,t,n,a){return[e.map((function(e){return Array(t).fill(0).map((function(t){return new N(e)}))})),n.map((function(e){return a.map((function(t){return new N(e,t)}))})),new N("@")].flat(2)},L=function(e){return e.reduce((function(e,t){return e.splice(Math.floor(Math.random()*e.length),0,t)&&e}),[])},A=function(e,t){return Object(g.a)(Array(t).keys()).map((function(n){return e.filter((function(e,a){return(a+n)%t===0}))}))},B=0,F=function(){return++B},N=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(d.a)(this,e),this.suit=t,this.value=n,this.free=a,this.id=F()},W=function(e,t){return e.suit!==t.suit&&0!==e.value&&e.value===t.value-1},G=function(e){return e.card?r.a.createElement("button",{disabled:!e.canMove,onClick:e.onClick},e.card.suit,e.card.value||""):r.a.createElement("button",{onClick:e.onClick},"Empty")},R=function(e){return r.a.createElement("ul",null,e.cards.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(G,{card:e,canMove:!1}))})))},x=function(e){var t=e.children;return r.a.createElement("table",null,r.a.createElement("tbody",null,t))},U=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"canMove",value:function(e){return e===this.props.cards.length-1||W(this.props.cards[e+1],this.props.cards[e])&&this.canMove(e+1)}},{key:"render",value:function(){var e=this,t=this.props.cards;return r.a.createElement("ul",null,t.length&&t.map((function(t,n){return r.a.createElement("li",{key:t.id},r.a.createElement(G,{card:t,canMove:e.canMove(n),onClick:e.props.onCardClick(n)}))}))||r.a.createElement("li",{key:"0"},r.a.createElement(G,{card:null,onClick:this.props.onCardClick(0)})))}}]),t}(r.a.Component),H=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(m.a)(this,Object(f.a)(t).call(this))).state={columns:O,suits:C,dragons:E,numbers:k,cardsPerDragon:y},e.handleReset=e.handleReset.bind(Object(c.a)(e)),e.handleChange=e.handleChange.bind(Object(c.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(c.a)(e)),e}return Object(h.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(e){var t=this.state,n={numberOfDragons:t.dragons,numberOfSuits:t.suits,numberOfNumbers:t.numbers,numberOfColumns:t.columns,numberPerDragon:t.cardsPerDragon};this.props.handleSubmit(n)(),e.preventDefault()}},{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"handleReset",value:function(){this.setState({columns:O,suits:C,dragons:E,numbers:k})}},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("table",null,r.a.createElement("tbody",{style:{"text-align":"right"}},r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("label",null,"Suits: "),r.a.createElement("input",{type:"number",name:"suits",min:"0",value:this.state.suits,onChange:this.handleChange})),r.a.createElement("td",null,r.a.createElement("label",null,"Dragons: "),r.a.createElement("input",{type:"number",name:"dragons",min:"0",value:this.state.dragons,onChange:this.handleChange})),r.a.createElement("td",null,r.a.createElement("label",null,"Columns: "),r.a.createElement("input",{type:"number",name:"columns",min:"0",value:this.state.columns,onChange:this.handleChange}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("label",null,"Cards/suit: "),r.a.createElement("input",{type:"number",name:"numbers",min:"0",value:this.state.numbers,onChange:this.handleChange})),r.a.createElement("td",null,r.a.createElement("label",null,"Cards/dragon: "),r.a.createElement("input",{type:"number",name:"cardsPerDragon",min:"0",value:this.state.cardsPerDragon,onChange:this.handleChange})),r.a.createElement("td",null,r.a.createElement("input",{type:"submit",value:"Save & restart"}),r.a.createElement("button",{type:"button",onClick:this.handleReset},"Defaults"))))))}}]),t}(r.a.Component),J=function(e){function t(e){var n;Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).getStartingState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:O,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:y,l=j(e),o=M(t),i=D(n),u=P(o,r,l,i),c=A(L(u),a),s=Array(t).fill(null),m=l.map((function(e){return new N(e,0)})),f={columns:c,freeCells:s,home:m,flower:null,inMotion:null};return{state:f,dragons:o,suits:l,cardsPerDragon:r}},n.getLastState=function(){return n.state.history.slice(-1)[0]},n.updateState=function(e){var t=n.state.history,a=t.slice(-1)[0];Object(b.isEqual)(e,a)||n.setState({history:[].concat(Object(g.a)(t),[e])})},n.rollBackMoves=function(e){return function(){var t=n.state.history.slice(0,-e);t.length<1||n.setState({history:t})}},n.goBackMoves=function(e){return function(){var t=n.state.history.slice(-e-1)[0];n.updateState(t)}},n.handleColumnClick=function(e){return function(t){return function(){var a=n.getLastState(),r=a.columns,l=a.inMotion,o=Object(i.a)(a,["columns","inMotion"]),u=r[e],c=l&&l[0]||null,s=u[t],m=function(){return u.length-1===t&&W(c,s)||0===u.length},f=l?m()?u.concat(l):u:u.filter((function(e,n){return n<t}))||[void 0],h=l?m()?null:l:u.slice(t,u.length),d=r.map((function(t,n){return e===n?f:t}));n.updateState(p({inMotion:h,columns:d},o))}}},n.handleFreeCellClick=function(e){return function(){var t=n.getLastState(),a=t.freeCells,r=t.inMotion,l=Object(i.a)(t,["freeCells","inMotion"]),o=a[e],u=!o&&r&&1===r.length&&r[0]||r&&o||null,c=o&&r||r&&r.length>1&&r||o&&[o]||null,s=a.map((function(t,n){return n===e?u:t}));n.updateState(p({freeCells:s,inMotion:c},l))}},n.handleHomeCellClick=function(e){return function(){var t=n.getLastState(),a=t.home,r=t.inMotion,l=Object(i.a)(t,["home","inMotion"]);if(r&&1===r.length){var o=a[e],u=r[0],c=u&&u.suit===o.suit&&u.value===o.value+1,s=c&&u||o,m=!c&&r||null,f=a.map((function(t,n){return n===e?s:t}));n.updateState(p({home:f,inMotion:m},l))}}},n.handleFlowerClick=function(){var e=n.getLastState(),t=e.inMotion,a=(e.flower,Object(i.a)(e,["inMotion","flower"]));if(t&&"@"===t[0].suit){var r=t[0];n.updateState(p({flower:r,inMotion:null},a))}},n.allDragonsFree=function(e){var t=n.getLastState(),a=t.freeCells,r=t.columns,l=t.inMotion,o=n.state.cardsPerDragon,i=a.concat(r.map((function(e){return e.slice(-1)[0]}))).filter((function(t){return t&&t.suit===e}));return!l&&i.length===o&&a.some((function(t){return null===t||t.suit===e}))},n.handleDragonsClick=function(e){return function(){var t=n.getLastState(),a=t.freeCells,r=t.columns,l=Object(i.a)(t,["freeCells","columns"]),o=a.map((function(t){return t&&t.suit===e?null:t})),u=r.map((function(t){return t.length&&t[t.length-1].suit===e?t.slice(0,-1):t})),c=o.indexOf(null),s=o.map((function(t,n){return n===c?new N("".concat(e,"*"),0,!1):t}));n.updateState(p({freeCells:s,columns:u},l))}},n.isWinningState=function(){var e=n.getLastState(),t=e.columns;return!e.inMotion&&t.every((function(e){return 0===e.length}))},n.autoComplete=function(){var e=n.getLastState(),t=e.inMotion,a=e.columns,r=e.freeCells,l=e.home;n.state.suits;if(!t){var o=function(e){return l.map((function(e){return e.suit})).indexOf(e.suit)},i=function(e,t){return l[e].value+1===t.value};a.forEach((function(e,t){if(e.length){var a=e.slice(-1)[0];if("@"!==a.suit){var r=o(a);r<0||i(r,a)&&[n.handleColumnClick(t)(e.length-1),n.handleHomeCellClick(r)].reduce((function(e,t){return e.then(t)}),Promise.resolve())}else[n.handleColumnClick(t)(e.length-1),n.handleFlowerClick].reduce((function(e,t){return e.then(t)}),Promise.resolve())}})),r.forEach((function(e,t){if(e)if("@"!==e.suit){var a=o(e);a<0||i(a,e)&&[n.handleFreeCellClick(t),n.handleHomeCellClick(a)].reduce((function(e,t){return e.then(t)}),Promise.resolve())}else[n.handleFreeCellClick(t),n.handleFlowerClick].reduce((function(e,t){return e.then(t)}),Promise.resolve())}))}},n.newGame=function(e){return function(){var t=e.numberOfSuits,a=e.numberOfDragons,r=e.numberOfNumbers,l=e.numberOfColumns,o=e.numberPerDragon;t=Boolean(String(t))?Number(t):C,a=Boolean(String(a))?Number(a):E,r=Boolean(String(r))?Number(r):k,l=Boolean(String(l))?Number(l):O,o=Boolean(String(o))?Number(o):y;var i=n.getStartingState(t,a,r,l,o),u=i.state,c=i.dragons,s=i.suits,m=i.cardsPerDragon;n.setState({history:[u],dragons:c,suits:s,cardsPerDragon:m,settings:{numberOfSuits:t,numberOfDragons:a,numberOfNumbers:r,numberOfColumns:l,numberPerDragon:o}})}},n.resetGame=function(){var e=n.state.history[0];n.updateState(e)},n.toggleConfig=function(){var e=n.state.config;n.setState({config:!e})};var a=n.getStartingState(),r=a.state,l=a.dragons,o=a.suits,u=a.cardsPerDragon;return n.state={history:[r],dragons:l,suits:o,cardsPerDragon:u,settings:{}},n.newGame=n.newGame.bind(Object(c.a)(n)),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.getLastState(),n=t.columns,a=t.freeCells,l=t.flower,o=t.home,i=t.inMotion,u=this.state.dragons,c=this.isWinningState();return r.a.createElement("div",null,this.state.config&&r.a.createElement(H,{handleSubmit:this.newGame}),r.a.createElement(x,null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(x,null,r.a.createElement("tr",null,a.map((function(t,n){return r.a.createElement("td",null,r.a.createElement(G,{card:t,canMove:null===t||t.free,onClick:e.handleFreeCellClick(n)}))}))),r.a.createElement("tr",null,u.map((function(t){return r.a.createElement("td",null,r.a.createElement("button",{disabled:!e.allDragonsFree(t),onClick:e.handleDragonsClick(t)},"^ ",t,"s"))}))))),r.a.createElement("td",null,r.a.createElement(x,null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(G,{card:l,canMove:!0,onClick:this.handleFlowerClick}))),r.a.createElement("tr",null,r.a.createElement("td",null,"^ @")))),r.a.createElement("td",null,r.a.createElement(x,null,r.a.createElement("tr",null,o.map((function(t,n){return t&&r.a.createElement("td",null,r.a.createElement(G,{card:t,canMove:!0,onClick:e.handleHomeCellClick(n)}))}))))),r.a.createElement("td",null,r.a.createElement("button",{onClick:this.resetGame},"reset game"),r.a.createElement("button",{onClick:this.newGame(this.state.settings)},"new game"),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.goBackMoves(1)},'"undo"'),r.a.createElement("button",{onClick:this.rollBackMoves(1)},"undo"),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.autoComplete},"auto move"),r.a.createElement("button",{onClick:this.toggleConfig},"settings"))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3},r.a.createElement(x,null,r.a.createElement("tr",null,n.map((function(t,n){return r.a.createElement("td",null,r.a.createElement(U,{cards:t,onCardClick:e.handleColumnClick(n)}))}))))))),r.a.createElement("div",{style:{height:"2em"}}),i&&r.a.createElement(R,{cards:i}),c&&r.a.createElement("h1",null,"You win!"))}}]),t}(r.a.Component),T=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function q(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(J,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/solitaire",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/solitaire","/service-worker.js");T?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):q(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):q(t,e)}))}}()}},[[13,1,2]]]);
//# sourceMappingURL=main.efa000d7.chunk.js.map